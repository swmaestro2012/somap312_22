package com.softwaremaestro.Indoornavigation.Util;

import java.sql.SQLException;
import java.util.ArrayList;
import kr.softwaremaestro.indoor.wrm.vo.BaseMeasurepoint;
import kr.softwaremaestro.indoor.wrm.vo.Measurepoint;
import kr.softwaremaestro.indoor.wrm.vo.MeasurepointLink;
import kr.softwaremaestro.indoor.wrm.vo.Point;
import kr.softwaremaestro.indoor.wrm.vo.PointOfInterest;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.ImageView;

public class MyLocationOverlayView extends ImageView {

	Point myLocation;

	int zOrder;

	public void setzOrder(int zOrder) {
		this.zOrder = zOrder;
	}

	public void setMyLocation(Point myLocation) {
		this.myLocation = myLocation;
	}

	public MyLocationOverlayView(Context context) {
		this(context, null);
	}

	public MyLocationOverlayView(Context context, int height, int width) {
		this(context, null);
	}

	public MyLocationOverlayView(Context context, AttributeSet attrs) {
		super(context, attrs);
		myLocation = new Point(-1,0.0,0.0,0.0);
		setBackgroundColor(Color.TRANSPARENT);
		setScaleType(ScaleType.MATRIX);
	}

	@Override
	protected void onLayout(boolean changed, int left, int top, int right,
			int bottom) {
		super.onLayout(changed, left, top, right, bottom);
	}

	public void onDraw(Canvas c) {
		super.onDraw(c);
		float[] value = new float[9];
		getImageMatrix().getValues(value);
		Paint paint = new Paint();
		paint.setAntiAlias(true);
		paint.setColor(Color.RED);
		paint.setAlpha(50);
		c.drawCircle((float) (value[2] + myLocation.getX() * value[0]),
				(float) (value[5] + myLocation.getY() * value[0]),
				14 * value[0], paint);
		paint.setAlpha(50);
	}

}